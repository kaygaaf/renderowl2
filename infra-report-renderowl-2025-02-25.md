# Renderowl Infra/Stability Report â€” Feb 25, 2026 8:50 PM

## ğŸ”¥ Critical Finding: API Crash Loop (RECOVERED)

**Status:** API is now HEALTHY âœ…  
**Issue:** API experienced 8 restarts with last crash at 19:23:48 UTC (~25 mins ago)  
**Current State:** All health checks passing

```
/live   â†’ 200 OK: {"status": "ok", "service": "renderowl-api"}
/ready  â†’ 200 OK: {"status": "ready", "database": "ok", "redis": "pong"}
```

**Coolify shows:** `restarting:unknown` (likely UI lag, actual service is healthy)

---

## ğŸ“Š Deployment Status

| Service | Status | Domain | Last Check |
|---------|--------|--------|------------|
| renderowl-UI | âœ… running:healthy | renderowl.com, app.renderowl.com | 19:25 UTC |
| videogen API | âš ï¸ restarting:unknown* | api.renderowl.com | 19:26 UTC |
| Redis | âœ… healthy (dependent) | internal | - |

*Note: API responds correctly to health checks despite Coolify status

---

## ğŸš§ Phase 3 Blocker: R2 Storage Credentials

**Status:** WAITING FOR KAY'S INPUT â³

The videogen codebase already has S3/R2 storage service code (commit `8a0bc5a` per briefing), but **R2 credentials are not configured**.

### Required Environment Variables (NOT SET):
```bash
R2_ENDPOINT_URL=https://<account>.r2.cloudflarestorage.com
R2_BUCKET_NAME=renderowl-videos
R2_ACCESS_KEY_ID=...
R2_SECRET_ACCESS_KEY=...
```

### Current Storage Setup:
- **Type:** Local volume (`mowkskw8s8wswo8cs88w04oo_job-data:/data/jobs`)
- **Status:** Working but not scalable
- **Risk:** Data loss on container recreation, disk space limits

### Action Required:
Kay needs to provide Cloudflare R2 credentials to complete Phase 3.

---

## ğŸ”„ 30-Day Auto-Delete Implementation

**Status:** BLOCKED by R2 setup

Once R2 is configured, implement:
1. Lifecycle policy on R2 bucket (preferred)
2. Or: Scheduled job in API to delete objects older than 30 days

**Code location needed:** Check `app/services/storage.py` or similar in videogen repo

---

## ğŸ¤ Support Provided to Other Teams

### Frontend Team
- âœ… Verified renderowl-UI deployment is healthy
- âœ… Confirmed app.renderowl.com and renderowl.com both responding (200)
- â„¹ï¸ Frontend can proceed with deployments â€” will monitor

### Product/API Team
- âš ï¸ API experienced crash loop earlier â€” now recovered
- ğŸ” Recommend investigating: What caused the 8 restarts?
- ğŸ“ No Stripe webhook endpoint configured yet (per briefing, waiting on Stripe account)

---

## ğŸ“‹ Action Items

| Priority | Task | Owner | Status |
|----------|------|-------|--------|
| P0 | Provide R2 credentials | Kay | â³ BLOCKING |
| P1 | Investigate API crash cause | Infra | ğŸ” TODO |
| P1 | Configure R2 env vars in Coolify | Infra | â³ BLOCKED |
| P2 | Set up 30-day auto-delete | Infra | â³ BLOCKED |
| P2 | Add R2/S3 health check to /ready | Infra | â³ BLOCKED |
| P3 | Set up Stripe webhook endpoint | Product/API | â³ BLOCKED (Stripe account) |

---

## ğŸ”” Immediate Recommendations

1. **Monitor API closely:** 8 restarts today suggests instability â€” check logs if it happens again
2. **Get R2 credentials ASAP:** Local storage won't scale for production video delivery
3. **Set up log aggregation:** Current debugging is difficult without centralized logs
4. **Add alerting:** Notify team if API restart count > 3 in 1 hour

---

*Report generated by Infra/Stability subagent*  
*Next check recommended: After next deployment push or within 24 hours*
