# ============================================================================
# Renderowl 2.0 - pgBackRest Configuration
# ============================================================================
# Alternative to wal-g for WAL archiving and backups
# Place in /etc/pgbackrest/pgbackrest.conf or mount as volume
# ============================================================================

[global]
# Repository Configuration
repo1-type=s3
repo1-path=/pgbackrest
repo1-s3-bucket=renderowl-backups-primary
repo1-s3-endpoint=s3.<account-id>.r2.cloudflarestorage.com
repo1-s3-region=auto
repo1-s3-uri-style=path
repo1-cipher-type=aes-256-cbc
repo1-cipher-pass=YOUR_CIPHER_PASSWORD

# Retention
repo1-retention-full=7
repo1-retention-full-type=count
repo1-retention-diff=4

# Performance
process-max=4

# Logging
log-level-console=info
log-level-file=debug
log-path=/var/log/pgbackrest

# Archive
archive-async=y
archive-push-queue-max=1GB
spool-path=/var/spool/pgbackrest

# Recovery
recovery-option=recovery_target_action=promote

[global:archive-push]
compress-level=6
process-max=2

[global:archive-get]
process-max=4

[global:backup]
compress-level=6
process-max=4

[global:restore]
process-max=4

# Stanza Configuration
[renderowl]
pg1-path=/var/lib/postgresql/data
pg1-port=5432
pg1-socket-path=/var/run/postgresql
