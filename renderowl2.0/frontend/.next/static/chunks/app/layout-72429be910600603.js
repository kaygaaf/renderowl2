(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{225:(e,t,r)=>{"use strict";r.d(t,{y:()=>i});var a=r(926);let i=(0,a.createServerReference)("7f97b62bbca506b02c9acbca32343f9ac83da85070",a.callServer,void 0,a.findSourceMapURL,"invalidateCacheAction")},960:(e,t,r)=>{"use strict";r.d(t,{JF:()=>s,Yg:()=>n});let a=r(5125).A.create({baseURL:"http://localhost:8080",headers:{"Content-Type":"application/json"},timeout:3e4}),i=null;function s(e){i=e}a.interceptors.request.use(async e=>{if(i)try{let t=await i();t&&(e.headers.Authorization="Bearer ".concat(t))}catch(e){console.error("Failed to get auth token:",e)}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,async e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(window.location.href="/auth?mode=login"),Promise.reject(e)});let n={list:async()=>(await a.get("/timelines")).data,get:async e=>(await a.get("/timelines/".concat(e))).data,create:async e=>(await a.post("/timelines",e)).data,update:async(e,t)=>(await a.put("/timelines/".concat(e),t)).data,delete:async e=>{await a.delete("/timelines/".concat(e))}}},3673:()=>{},4760:(e,t,r)=>{Promise.resolve().then(r.bind(r,5881)),Promise.resolve().then(r.bind(r,8543)),Promise.resolve().then(r.bind(r,2004)),Promise.resolve().then(r.bind(r,3618)),Promise.resolve().then(r.bind(r,7471)),Promise.resolve().then(r.bind(r,1526)),Promise.resolve().then(r.t.bind(r,8963,23)),Promise.resolve().then(r.t.bind(r,3673,23)),Promise.resolve().then(r.bind(r,5380))},5380:(e,t,r)=>{"use strict";r.d(t,{As:()=>c,AuthProvider:()=>d,YK:()=>u});var a=r(5155),i=r(2115),s=r(4018),n=r(7471),l=r(960);let o=(0,i.createContext)(void 0);function d(e){let{children:t}=e,{user:r,isLoaded:d}=(0,s.Jd)(),{signOut:c,isSignedIn:u,getToken:f}=(0,n.d)(),[v,m]=(0,i.useState)(null),[h,p]=(0,i.useState)([]),[b,y]=(0,i.useState)(!1),[w,P]=(0,i.useState)(null);(0,i.useEffect)(()=>{f&&(0,l.JF)(f)},[f]),(0,i.useEffect)(()=>{if(r){var e;m({id:r.id,email:(null==(e=r.primaryEmailAddress)?void 0:e.emailAddress)||"",name:r.fullName||r.firstName||"User",avatar:r.imageUrl,credits:1e3,plan:"free"})}else m(null)},[r]);let A=async()=>{var e,t,r;if(!u)return void p([]);y(!0),P(null);try{let t=(null==(e=(await l.Yg.list()).data)?void 0:e.map(e=>({id:e.id,title:e.name,description:e.description,status:e.status||"draft",duration:e.duration||0,createdAt:e.created_at,updatedAt:e.updated_at,userId:e.user_id})))||[];p(t)}catch(e){console.error("Failed to fetch projects:",e),P((null==(r=e.response)||null==(t=r.data)?void 0:t.error)||"Failed to load projects")}finally{y(!1)}};(0,i.useEffect)(()=>{u?A():p([])},[u]);let S=async()=>{await c(),m(null),p([])};return(0,a.jsx)(o.Provider,{value:{user:r,isLoaded:d,isSignedIn:u||!1,userData:v,projects:h,projectsLoading:b,projectsError:w,refreshProjects:A,signOut:S},children:t})}function c(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function u(){let{projects:e,projectsLoading:t,projectsError:r,refreshProjects:a}=c();return{projects:e,projectsLoading:t,projectsError:r,refreshProjects:a}}},8901:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(926);let i=(0,a.createServerReference)("7fc079626f2350177b26d931e315de44dd00abd1fe",a.callServer,void 0,a.findSourceMapURL,"detectKeylessEnvDriftAction")},8963:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3"}}},e=>{e.O(0,[300,236,503,441,255,358],()=>e(e.s=4760)),_N_E=e.O()}]);