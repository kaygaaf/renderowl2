"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ZodEffectEditor = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const Fieldset_1 = require("./Fieldset");
const ZodFieldValidation_1 = require("./ZodFieldValidation");
const ZodSwitch_1 = require("./ZodSwitch");
const local_state_1 = require("./local-state");
const zod_schema_type_1 = require("./zod-schema-type");
const fullWidth = {
    width: '100%',
};
const ZodEffectEditor = ({ schema, jsonPath, value, setValue: updateValue, defaultValue, onSave, onRemove, showSaveButton, saving, mayPad, }) => {
    const typeName = (0, zod_schema_type_1.getZodSchemaType)(schema);
    if (typeName !== 'effects') {
        throw new Error('expected effect');
    }
    const { localValue, onChange } = (0, local_state_1.useLocalState)({
        unsavedValue: value,
        schema,
        setValue: updateValue,
        savedValue: defaultValue,
    });
    const innerSchema = (0, zod_schema_type_1.getEffectsInner)(schema);
    return (jsx_runtime_1.jsxs(Fieldset_1.Fieldset, { shouldPad: mayPad, success: localValue.zodValidation.success, children: [
            jsx_runtime_1.jsx("div", { style: fullWidth, children: jsx_runtime_1.jsx(ZodSwitch_1.ZodSwitch, { value: value, setValue: onChange, jsonPath: jsonPath, schema: innerSchema, defaultValue: defaultValue, onSave: onSave, showSaveButton: showSaveButton, onRemove: onRemove, saving: saving, saveDisabledByParent: !localValue.zodValidation.success, mayPad: false }) }), jsx_runtime_1.jsx(ZodFieldValidation_1.ZodFieldValidation, { path: jsonPath, localValue: localValue })
        ] }));
};
exports.ZodEffectEditor = ZodEffectEditor;
